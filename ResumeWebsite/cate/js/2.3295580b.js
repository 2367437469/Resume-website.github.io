"use strict";(self["webpackChunkdouguo"]=self["webpackChunkdouguo"]||[]).push([[2],{7730:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"userdetail"},[e("div",{staticClass:"nav"},[e("van-nav-bar",{attrs:{fixed:"","left-arrow":""},on:{"click-left":t.back},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"ellipsis",size:"20",color:"#000"},on:{click:function(s){t.showShare=!0}}})]},proxy:!0}])})],1),e("div",{staticClass:"user-info"},[e("div",{staticClass:"img-box"},[e("div",{staticClass:"user-img"},[e("img",{staticClass:"auto-img",attrs:{src:t.user.user_photo,alt:""}})]),t.user.verified_image?e("div",{staticClass:"verified"},[e("img",{staticClass:"auto-img",attrs:{src:t.user.verified_image,alt:""}})]):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"title-box"},[e("div",{staticClass:"name"},[t._v(t._s(t.user.nick))]),t.user.usermedal?e("div",{staticClass:"usermedal-box"},[e("div",{staticClass:"usermedal"},[e("img",{staticClass:"auto-img",attrs:{src:t.user.usermedal.icon,alt:""}})]),e("div",{staticClass:"count"},[t._v(t._s(t.user.usermedal.count_text))])]):t._e(),e("div",{staticClass:"lv"},[t._v("LV."+t._s(t.user.lvl))])]),e("div",{staticClass:"collect interest",on:{click:function(s){return s.stopPropagation(),t.interest.apply(null,arguments)}}},[t._v("关注")])])]),e("div",{staticClass:"archivement"},t._l(t.archivementTag,(function(s,i){return e("div",{key:i,staticClass:"tag",style:{color:s.text_color,backgroundColor:s.background_start_color}},[t._v(" "+t._s(s.text)+" "),e("van-icon",{attrs:{name:"play"}})],1)})),0),e("div",{staticClass:"introduce"},[e("div",{staticClass:"item"},[t._v("厨娘")]),e("div",{staticClass:"item"},[t._v(t._s(t.user.age))]),e("div",{staticClass:"item"},[t._v(t._s(t.user.location))])]),e("div",{staticClass:"introduction"},[t._v(" "+t._s(t.user.introduction?t.user.introduction:t.text)+" ")]),e("div",{staticClass:"list"},[e("div",{staticClass:"item"},[e("div",{staticClass:"count"},[t._v(t._s(t.user.following_count_text))]),e("div",{staticClass:"title"},[t._v("关注")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"count"},[t._v(t._s(t.user.followers_count_text))]),e("div",{staticClass:"title"},[t._v("粉丝")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"count"},[t._v(t._s(t.user.favoed_count_text))]),e("div",{staticClass:"title"},[t._v("被收藏")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"count"},[t._v(t._s(t.user.noted_count_text))]),e("div",{staticClass:"title"},[t._v("被学做")])]),e("div",{staticClass:"item"},[e("div",{staticClass:"count"},[t._v(t._s(t.user.point_text))]),e("div",{staticClass:"title"},[t._v("经验值")])])]),e("van-tabs",{attrs:{color:"#facc30","title-active-color":"#000","title-inactive-color":"#999"},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[e("van-tab",{attrs:{title:t.name.recipes,"title-style":{fontWeight:"bold",fontSize:"16px"},name:"a"}},[e("div",{staticClass:"recipes-list"},[t._l(t.recipes,(function(s,i){return e("div",{key:i,staticClass:"recipes-item",on:{click:function(e){return t.goDetail(s.r.id)}}},[e("div",{staticClass:"banner"},[e("img",{staticClass:"auto-img",attrs:{src:s.r.img,alt:""}})]),e("div",{staticClass:"recommend"},[t._v(t._s(s.r.recommend_label))]),e("div",{staticClass:"title"},[t._v(t._s(s.r.n))])])})),e("van-list",{attrs:{offset:"100",finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("br")])],2)]),e("van-tab",{attrs:{title:t.name.notes,"title-style":{fontWeight:"bold",fontSize:"16px"},name:"b"}},[e("van-calendar",{style:{height:"450px"},attrs:{"min-date":t.minDate,"max-date":t.maxDate,poppable:!1,"show-subtitle":!1,"show-confirm":!1}}),e("div",{staticClass:"usernotescalendar-list"},t._l(t.usernotescalendar,(function(s,i){return e("div",{key:i,staticClass:"usernotescalendar-item"},[e("div",{staticClass:"date"},[e("div",{staticClass:"day"},[t._v(t._s(s.day_text))]),e("div",{staticClass:"month"},[t._v(t._s(s.month_text))])]),e("div",{staticClass:"notes-item"},t._l(s.day_list,(function(s,i){return e("div",{key:i,staticClass:"item",on:{click:function(e){return t.goNotesDetail(s.id)}}},[e("img",{attrs:{src:s.image_u,alt:""}})])})),0)])})),0),e("van-list",{attrs:{offset:"100",finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad2},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("br")])],1),e("van-tab",{attrs:{title:t.name.collect,"title-style":{fontWeight:"bold",fontSize:"16px"},name:"c"}},[e("div",{staticClass:"ufavorites-list"},t._l(t.ufavorites,(function(s,i){return e("div",{key:i,staticClass:"ufavorites-item",on:{click:function(e){return t.goDetail(s.id)}}},[e("div",{staticClass:"banner"},[e("img",{staticClass:"auto-img",attrs:{src:s.img,alt:""}})]),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[t._v(t._s(s.n))]),e("div",{staticClass:"recommend"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.rate>0,expression:"item.rate > 0"}]},[t._v(t._s(s.rate)+"分 · ")]),e("span",[t._v(t._s(s.recommend_label))])]),e("div",{staticClass:"user"},[e("div",{staticClass:"head-img"},[e("img",{staticClass:"auto-img",attrs:{src:s.a.p,alt:""}})]),e("div",{staticClass:"name"},[t._v(t._s(s.a.n))])])])])})),0),e("van-list",{attrs:{offset:"100",finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad1},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[e("br")])],1)],1),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(s){t.showShare=s},expression:"showShare"}})],1)},a=[],n=(e(7542),e(1404)),o=(e(8508),e(8256)),r={name:"Userdetail",data(){return{id:"",user:{},archivementTag:[],text:"吃货不是在吃就是在去吃的路上，没时间写签名",activeName:"a",offset:0,limit:10,noteOffset:0,noteLimit:100,name:{recipes:"",notes:"",collect:""},year:"",month:"",day:"",recipes:[],loading:!1,finished:!1,ufavorites:[],minDate:"",maxDate:"",usernotescalendar:[],showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]]}},created(){this.id=this.$route.params.id,this.getUserDetailData(),this.getUrecipesData();let t=new Date;this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.maxDate=new Date(this.year,this.month,this.day),this.getNotescalendar(),this.getUfavorites(),this.getUsernotescalendar()},methods:{back(){this.$router.go(-1)},onLoad(){this.offset=this.offset+10,setTimeout((()=>{this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/urecipes/"+this.id+"/"+this.offset+"/"+this.limit}).then((t=>{200===t.status&&t.data.result.list.forEach((t=>{this.recipes.push(t)}))})).catch((t=>{})),this.loading=!1,this.recipes.length<this.limit&&(this.finished=!0)}),1e3)},getUserDetailData(){this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/info/"+this.id}).then((t=>{this.archivementTag=t.data.result.user.archivement_tags,this.user=t.data.result.user,this.name.recipes="菜谱"+this.user.recipes_count,this.name.notes="笔记"+this.user.notes_count,this.name.collect="收藏"+this.user.collect_count;let s=this.user.regist_time.split(/ /)[0].split(/-/)[0],e=this.user.regist_time.split(/ /)[0].split(/-/)[1]-1,i=this.user.regist_time.split(/ /)[0].split(/-/)[2];this.minDate=new Date(s,e,i)})).catch((t=>{}))},getUrecipesData(){this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/urecipes/"+this.id+"/"+this.offset+"/"+this.limit}).then((t=>{this.recipes=t.data.result.list})).catch((t=>{}))},goDetail(t){this.$router.push({name:"Detail",params:{id:t}})},goNotesDetail(t){this.$router.push({name:"Notesdetail",params:{id:t}})},getNotescalendar(){this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/notescalendar/"+this.id+"/"+this.year+"/"+this.month}).then((t=>{})).catch((t=>{}))},getUsernotescalendar(){this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/usernotescalendar/"+this.id+"/"+this.noteOffset+"/"+this.noteLimit}).then((t=>{this.usernotescalendar=t.data.result.notes})).catch((t=>{}))},onLoad2(){this.noteOffset=this.noteOffset+50,setTimeout((()=>{this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/usernotescalendar/"+this.id+"/"+this.noteOffset+"/"+this.noteLimit}).then((t=>{t.data.result.notes,t.status,this.loading=!1})).catch((t=>{})),this.usernotescalendar.length<this.noteLimit&&(this.finished=!0)}),1e3)},getUfavorites(){this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/ufavorites/"+this.id+"/"+this.offset+"/"+this.limit}).then((t=>{this.ufavorites=t.data.result.recipes})).catch((t=>{}))},onLoad1(){this.offset=this.offset+10,setTimeout((()=>{this.axios({method:"get",url:"https://apis.netstart.cn/douguo/user/ufavorites/"+this.id+"/"+this.offset+"/"+this.limit}).then((t=>{200===t.status&&t.data.result.recipes.forEach((t=>{this.ufavorites.push(t)}))})).catch((t=>{})),this.loading=!1,this.ufavorites.length<this.limit&&(this.finished=!0)}),1e3)},onSelect(t){(0,o.Z)(t.name),this.showShare=!1},interest(){let t=document.querySelector(".interest");this.$root.isLogin?this.isinterest?(n.Z.confirm({title:"提示",message:"确定要取消关注该用户吗?"}).then((()=>{t.innerText="关注",t.style.backgroundColor="#facc30"})),this.isinterest=!1):(t.innerText="已关注",t.style.backgroundColor="#f1f1f1",this.isinterest=!0):this.$router.push({name:"Login"})}}},l=r,c=e(1001),d=(0,c.Z)(l,i,a,!1,null,"17c7f993",null),u=d.exports}}]);
//# sourceMappingURL=2.3295580b.js.map