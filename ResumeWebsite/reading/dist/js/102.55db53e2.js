"use strict";(self["webpackChunkmaoyan"]=self["webpackChunkmaoyan"]||[]).push([[102],{5102:function(t,a,s){s.r(a),s.d(a,{default:function(){return l}});var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"BookClassify"},[s("div",{staticClass:"BookClassify-box"},[s("div",{staticClass:"top-type"},[s("div",{staticClass:"top-select"},t._l(t.TopData,(function(a,e){return s("div",{key:e,staticClass:"top-tab",class:[t.activeIndex===e?"active":""],on:{click:function(s){return s.stopPropagation(),t.getNodeId(a.node[0].id,e)}}},[t._v(" "+t._s(a.name)+" ")])})),0),s("div",{staticClass:"top-search",on:{click:function(a){return a.stopPropagation(),t.inputing.apply(null,arguments)}}},[s("van-icon",{attrs:{name:"search"}})],1)]),s("div",{staticClass:"middle-type"},[s("div",{staticClass:"middle-select"},t._l(t.tabData,(function(a,e){return s("div",{key:e,staticClass:"middle-tab",on:{click:function(s){return s.stopPropagation(),t.getLabelUrl(a)}}},[t._v(" "+t._s(a.name)+" ")])})),0)]),s("div",{staticClass:"bottom-type"},[s("div",{staticClass:"bottom-select"},[s("div",{staticClass:"select-one"},t._l(t.catArrayData,(function(a,e){return s("div",{key:e,staticClass:"one-title",class:[t.tt===e?"tabActive":""],on:{click:function(s){return s.stopPropagation(),t.getTit(a,e)}}},[t._v(t._s(a.name))])})),0),s("div",{staticClass:"filtrate-tab",on:{click:function(a){a.stopPropagation(),t.isShow=!t.isShow}}},[s("div",{staticClass:"tab-img"},[s("van-icon",{attrs:{name:"arrow-up"}})],1),s("div",{staticClass:"tab-title"},[t._v("筛选")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"bottom-hidebox"},[t.categoriesData?s("div",{staticClass:"hide-box"},[s("div",{staticClass:"hide-tab"},t._l(t.hideData0,(function(a,e){return s("div",{key:e,staticClass:"item",class:[t.tp===e?"tabActive":""],on:{click:function(s){return s.stopPropagation(),t.getPay(a,e)}}},[t._v(" "+t._s(a.name)+" ")])})),0),s("div",{staticClass:"hide-tab"},t._l(t.hideData1,(function(a,e){return s("div",{key:e,staticClass:"item",class:[t.tb===e?"tabActive":""],on:{click:function(s){return s.stopPropagation(),t.getBookStatus(a,e)}}},[t._v(" "+t._s(a.name)+" ")])})),0),s("div",{staticClass:"hide-tab"},t._l(t.hideData2,(function(a,e){return s("div",{key:e,staticClass:"item",class:[t.tw===e?"tabActive":""],on:{click:function(s){return s.stopPropagation(),t.getWordCounts(a,e)}}},[t._v(" "+t._s(a.name)+" ")])})),0)]):t._e()])])]),s("div",{staticClass:"classify-list"},t._l(t.listData,(function(a,e){return s("div",{key:e,staticClass:"book-item",on:{click:function(s){return t.gitBookDetails(a)}}},[s("div",{staticClass:"book-img"},[s("img",{attrs:{src:a.cover,alt:""}})]),s("div",{staticClass:"book-title"},[t._v(" "+t._s(a.title)+" ")]),s("div",{staticClass:"book-author"},[t._v(" "+t._s(a.author)+" ")])])})),0),s("div",{ref:"loadmore",staticClass:"loadmore"},[s("van-loading",{attrs:{type:"spinner",size:"20px",color:"#1989fa"}}),s("div",[t._v(" 正在努力赶来ing ")])],1)])},i=[],o={props:{},data(){return{TopData:[],activeIndex:0,tabData:[],catId:"",categoriesData:[],catArrayData:[],hideData0:[],hideData1:[],hideData2:[],sort:1,wordCount:0,bookStatus:0,pay:0,isShow:!1,tt:0,tp:0,tb:0,tw:0,next:"",listData:[],page:1,mrid:"",mrurl:""}},computed:{},watch:{},methods:{async getNodeId(t,a){this.activeIndex=a,await this.axios.get("/store/info.json?type=female&bar=cat&uuid="+t).then((t=>{this.tabData=t.list[0].labels,this.mrurl=this.tabData[0],this.getLabelUrl(this.mrurl)}))},async getTopData(){await this.axios.get("/store/node.json?gender=1").then((t=>{this.TopData=t.books,this.mrid=this.TopData[0].node[0].id;let a=0;this.getNodeId(this.mrid,a)}))},async getLabelUrl(t){let a=t.url.split("?");this.catId=a[1],await this.axios.get(t.url).then((t=>{this.categoriesData=t.categories.splice(0,3),console.log("categoriesData",this.categoriesData),this.hideData0=this.categoriesData[0].catArray,this.hideData1=this.categoriesData[1].catArray,this.hideData2=this.categoriesData[2].catArray,this.catArrayData=t.categories[0].catArray,this.getResourceData()}))},async getResourceData(){await this.axios.get("/source/v2/searchBook.json?"+this.catId+"&wordCount="+this.wordCount+"&pay="+this.pay+"&bookStatus="+this.bookStatus+"&sort="+this.sort+"&page="+this.page).then((t=>{console.log("ResourceData=>",t);for(let a=0;a<t.list.length;a++)this.listData.push(t.list[a]);console.log("this.listData",this.listData)}))},gitBookDetails(t){console.log(t),3===this.activeIndex?this.$router.push({name:"ListenBook",params:{id:t.id}}):this.$router.push({name:"BookDetails",params:{id:t.id,title:t.title}})},windowScroll(){let t=document.documentElement.scrollTop||document.body.scrollTop,a=this.$refs.loadmore.offsetTop,s=window.innerHeight;t+s>=a+33&&(this.page++,this.getResourceData())},getTit(t,a){this.tt=a,this.sort=t.value,this.getResourceData()},getPay(t,a){this.tp=a,this.pay=t.value,this.getResourceData()},getBookStatus(t,a){this.tb=a,this.bookStatus=t.value,console.log("this.bookStatus",this.bookStatus),this.getResourceData()},getWordCounts(t,a){this.tw=a,this.wordCount=t.value,this.getResourceData()},inputing(){this.$router.push({name:"SearchView"})}},created(){this.getTopData(),this.getLabelUrl(),this.getResourceData(),this.getNodeId(),this.getNextResourceData()},mounted(){window.addEventListener("scroll",this.windowScroll)},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){window.removeEventListener("scroll",this.windowScroll)},destroyed(){},activated(){},components:{}},r=o,n=s(1001),c=(0,n.Z)(r,e,i,!1,null,"9cd63a90",null),l=c.exports}}]);
//# sourceMappingURL=102.55db53e2.js.map