"use strict";(self["webpackChunkmaoyan"]=self["webpackChunkmaoyan"]||[]).push([[102],{5102:function(t,e,a){a.r(e),a.d(e,{default:function(){return l}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"BookClassify"},[a("div",{staticClass:"BookClassify-box"},[a("div",{staticClass:"top-type"},[a("div",{staticClass:"top-select"},t._l(t.TopData,(function(e,i){return a("div",{key:i,staticClass:"top-tab",class:[t.activeIndex===i?"active":""],on:{click:function(a){return a.stopPropagation(),t.getNodeId(e.node[0].id,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0),a("div",{staticClass:"top-search",on:{click:function(e){return e.stopPropagation(),t.inputing.apply(null,arguments)}}},[a("van-icon",{attrs:{name:"search"}})],1)]),a("div",{staticClass:"middle-type"},[a("div",{staticClass:"middle-select"},t._l(t.tabData,(function(e,i){return a("div",{key:i,staticClass:"middle-tab",on:{click:function(a){return a.stopPropagation(),t.getLabelUrl(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("div",{staticClass:"bottom-type"},[a("div",{staticClass:"bottom-select"},[a("div",{staticClass:"select-one"},t._l(t.catArrayData,(function(e,i){return a("div",{key:i,staticClass:"one-title",class:[t.tt===i?"tabActive":""],on:{click:function(a){return a.stopPropagation(),t.getTit(e,i)}}},[t._v(t._s(e.name))])})),0),a("div",{staticClass:"filtrate-tab",on:{click:function(e){e.stopPropagation(),t.isShow=!t.isShow}}},[a("div",{staticClass:"tab-img"},[a("van-icon",{attrs:{name:"arrow-up"}})],1),a("div",{staticClass:"tab-title"},[t._v("筛选")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"bottom-hidebox"},[t.categoriesData?a("div",{staticClass:"hide-box"},[a("div",{staticClass:"hide-tab"},t._l(t.hideData0,(function(e,i){return a("div",{key:i,staticClass:"item",class:[t.tp===i?"tabActive":""],on:{click:function(a){return a.stopPropagation(),t.getPay(e,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0),a("div",{staticClass:"hide-tab"},t._l(t.hideData1,(function(e,i){return a("div",{key:i,staticClass:"item",class:[t.tb===i?"tabActive":""],on:{click:function(a){return a.stopPropagation(),t.getBookStatus(e,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0),a("div",{staticClass:"hide-tab"},t._l(t.hideData2,(function(e,i){return a("div",{key:i,staticClass:"item",class:[t.tw===i?"tabActive":""],on:{click:function(a){return a.stopPropagation(),t.getWordCounts(e,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e()])])]),a("div",{staticClass:"classify-list"},t._l(t.listData,(function(e,i){return a("div",{key:i,staticClass:"book-item",on:{click:function(a){return t.gitBookDetails(e)}}},[a("div",{staticClass:"book-img"},[a("img",{attrs:{src:e.cover,alt:""}})]),a("div",{staticClass:"book-title"},[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"book-author"},[t._v(" "+t._s(e.author)+" ")])])})),0),a("div",{ref:"loadmore",staticClass:"loadmore"},[a("van-loading",{attrs:{type:"spinner",size:"20px",color:"#1989fa"}}),a("div",[t._v(" 正在努力赶来ing ")])],1)])},o=[],s=a(6198),n=(a(4916),a(3123),a(561),a(2707),a(8975),{props:{},data:function(){return{TopData:[],activeIndex:0,tabData:[],catId:"",categoriesData:[],catArrayData:[],hideData0:[],hideData1:[],hideData2:[],sort:1,wordCount:0,bookStatus:0,pay:0,isShow:!1,tt:0,tp:0,tb:0,tw:0,next:"",listData:[],page:1,mrid:"",mrurl:""}},computed:{},watch:{},methods:{getNodeId:function(t,e){var a=this;return(0,s.Z)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.activeIndex=e,i.next=3,a.axios.get("/store/info.json?type=female&bar=cat&uuid="+t).then((function(t){a.tabData=t.list[0].labels,a.mrurl=a.tabData[0],a.getLabelUrl(a.mrurl)}));case 3:case"end":return i.stop()}}),i)})))()},getTopData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/store/node.json?gender=1").then((function(e){t.TopData=e.books,t.mrid=t.TopData[0].node[0].id;var a=0;t.getNodeId(t.mrid,a)}));case 2:case"end":return e.stop()}}),e)})))()},getLabelUrl:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.url.split("?"),e.catId=i[1],a.next=4,e.axios.get(t.url).then((function(t){e.categoriesData=t.categories.splice(0,3),console.log("categoriesData",e.categoriesData),e.hideData0=e.categoriesData[0].catArray,e.hideData1=e.categoriesData[1].catArray,e.hideData2=e.categoriesData[2].catArray,e.catArrayData=t.categories[0].catArray,e.getResourceData()}));case 4:case"end":return a.stop()}}),a)})))()},getResourceData:function(){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("/source/v2/searchBook.json?"+t.catId+"&wordCount="+t.wordCount+"&pay="+t.pay+"&bookStatus="+t.bookStatus+"&sort="+t.sort+"&page="+t.page).then((function(e){console.log("ResourceData=>",e);for(var a=0;a<e.list.length;a++)t.listData.push(e.list[a]);console.log("this.listData",t.listData)}));case 2:case"end":return e.stop()}}),e)})))()},gitBookDetails:function(t){console.log(t),3===this.activeIndex?this.$router.push({name:"ListenBook",params:{id:t.id}}):this.$router.push({name:"BookDetails",params:{id:t.id,title:t.title}})},windowScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=this.$refs.loadmore.offsetTop,a=window.innerHeight;t+a>=e+33&&(this.page++,this.getResourceData())},getTit:function(t,e){this.tt=e,this.sort=t.value,this.getResourceData()},getPay:function(t,e){this.tp=e,this.pay=t.value,this.getResourceData()},getBookStatus:function(t,e){this.tb=e,this.bookStatus=t.value,console.log("this.bookStatus",this.bookStatus),this.getResourceData()},getWordCounts:function(t,e){this.tw=e,this.wordCount=t.value,this.getResourceData()},inputing:function(){this.$router.push({name:"SearchView"})}},created:function(){this.getTopData(),this.getLabelUrl(),this.getResourceData(),this.getNodeId(),this.getNextResourceData()},mounted:function(){window.addEventListener("scroll",this.windowScroll)},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){window.removeEventListener("scroll",this.windowScroll)},destroyed:function(){},activated:function(){},components:{}}),r=n,c=a(1001),u=(0,c.Z)(r,i,o,!1,null,"9cd63a90",null),l=u.exports}}]);
//# sourceMappingURL=102-legacy.3629d513.js.map