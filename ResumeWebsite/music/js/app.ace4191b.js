(function(){"use strict";var t={5976:function(t,e,i){i.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"load-animate"},[i("ul",[i("li"),i("li"),i("li"),i("li"),i("li")])])}],s={},r=s,l=i(1001),o=(0,l.Z)(r,n,a,!1,null,"7fc7deb0",null),c=o.exports},5653:function(t,e,i){i.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"music-list"},[i("ol",{style:{paddingLeft:t.shownum?"30px":"0"}},t._l(t.musiclist,(function(e,n){return i("li",{key:e.id,staticClass:"list"},[t.shownum?i("div",{class:["num",{red:n+1<=3}]},[t._v(t._s(n+1<10?"0"+(n+1):n+1))]):t._e(),i("div",{staticClass:"song-name"},[t._v(" "+t._s(e.name)+" "),e.song.alias.length>0?i("span",[t._v(" ("),t._l(e.song.alias,(function(e,n){return i("span",{key:n,staticClass:"alias"},[t._v(" "+t._s(e))])})),t._v(") ")],2):t._e(),i("div",{staticClass:"song-author"},[i("i",{staticClass:"list-svg1"}),i("div",{staticClass:"author-box"},[i("div",{staticClass:"author"},[t._v(" "+t._s(e.song.artists[0].name)+" ")]),t._v(" - "+t._s(e.song.album.name)+" ")])])]),i("i",{staticClass:"list-svg2",on:{click:function(i){return i.stopPropagation(),t.$emit("play",e)}}})])})),0)])},a=[],s={props:{musiclist:{type:Array,default:()=>[]},shownum:{type:Boolean,default:!1}},data(){return{}},created(){},methods:{}},r=s,l=i(1001),o=(0,l.Z)(r,n,a,!1,null,"4dea4c98",null),c=o.exports},1844:function(t,e,i){var n=i(8935),a=i(6166),s=i.n(a);let r={baseURL:"http://localhost:3000",timeout:8e3};const l=s().create(r);function o(){}l.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){return t.data?t.data.data?t.data.data:t.data:t}),(function(t){return Promise.reject(t)})),o.install=function(t){t.axios=l,window.axios=l,Object.defineProperties(t.prototype,{axios:{get(){return l}},$axios:{get(){return l}}})},n.Z.use(o);var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("tab-nav"),i("router-view",{on:{play:t.play}}),i("music-play",{attrs:{music:t.currentMusic,playlist:t.playList},on:{play:t.play}})],1)},u=[],p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"nav"},[i("router-link",{attrs:{tag:"li",to:"/"}},[i("span",[t._v("推荐音乐")])]),i("router-link",{attrs:{tag:"li",to:"/HotMusic"}},[i("span",[t._v("热歌榜")])]),i("router-link",{attrs:{tag:"li",to:"/Search"}},[i("span",[t._v("搜索")])])],1)},d=[],m=i(1001),h={},f=(0,m.Z)(h,p,d,!1,null,"71a88520",null),y=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.music?i("div",{staticClass:"musicplay"},[i("audio",{ref:"player",attrs:{autoplay:"",src:"http://music.163.com/song/media/outer/url?id="+t.music.id+".mp3"},on:{play:t.playAudio,pause:t.pauseAudio,timeupdate:t.timeUpdate}}),i("div",{staticClass:"play-bar",on:{click:function(e){e.stopPropagation(),t.isfull=!0}}},[i("img",{style:{animationPlayState:t.playState?"running":"paused"},attrs:{src:t.music.picUrl||t.music.al.picUrl}}),i("span",[i("div",{style:{animationPlayState:t.playState?"running":"paused"}},[t._v(" "+t._s(t.music.name)+"-"),t._l(t.music.song.artists,(function(e,n){return i("b",{key:n+e},[t._v(t._s(e.name))])}))],2)]),i("i",{class:["playbtn",{play:t.playState},{pause:!t.playState}],on:{click:function(e){return e.stopPropagation(),t.changePlay.apply(null,arguments)}}}),i("span",{staticClass:"gedan"})]),t.isfull?i("music-full-screen",{attrs:{music:t.music,playState:t.playState,currentTime:t.currentTime,totalTime:t.totalTime,playlist:t.playlist},on:{showfull:function(e){t.isfull=e},changetime:t.changeTime,play:function(e){return t.$emit("play",e)}}}):t._e()],1):t._e()},g=[],_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.music?i("div",{staticClass:"full-screen",on:{click:function(e){e.stopPropagation(),t.showList=!1}}},[i("div",{staticClass:"top-bar"},[i("span",{staticClass:"title"},[t._v(t._s(t.music.name))]),i("span",{staticClass:"back",on:{click:function(e){return e.stopPropagation(),t.$emit("showfull",!1)}}},[t._v("<")]),i("span",{staticClass:"fenxiang"})]),i("div",{staticClass:"mask"},[i("img",{style:{animationPlayState:t.playState?"running":"paused"},attrs:{src:t.music.picUrl||t.music.al.picUrl}})]),i("div",{staticClass:"lyric"},[i("ul",{style:{transform:"translateY(-"+30*t.currentIndex+"px)"}},t._l(t.lyricArray,(function(e,n){return i("li",{key:n,class:{active:n==t.currentIndex}},[t._v(t._s(e.lyric))])})),0)]),i("div",{staticClass:"progress"},[i("div",{staticClass:"cur"},[t._v(t._s(t._f("formatMusicTime")(t.currentTime)))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.rangetime,expression:"rangetime"}],attrs:{type:"range",min:"0",max:"100"},domProps:{value:t.rangetime},on:{__r:function(e){t.rangetime=e.target.value}}}),i("div",{staticClass:"tot"},[t._v(t._s(t._f("formatMusicTime")(t.totalTime)))])]),i("div",{staticClass:"bottom-bar"},[i("div",{staticClass:"playmode"},[i("span",{class:[{order:3==t.playMode},{repeat:1==t.playMode},{shuffle:2==t.playMode}],on:{click:function(e){return e.stopPropagation(),t.changeMode.apply(null,arguments)}}})]),i("span",{staticClass:"prev-song",on:{click:function(e){return e.stopPropagation(),t.prevSong.apply(null,arguments)}}}),i("i",{class:[{play:t.playState},{pause:!t.playState}],on:{click:function(e){return e.stopPropagation(),t.changePlay.apply(null,arguments)}}}),i("span",{staticClass:"next-song",on:{click:function(e){return e.stopPropagation(),t.nextSong.apply(null,arguments)}}}),i("span",{staticClass:"song-list",on:{click:function(e){e.stopPropagation(),t.showList=!0}}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"playlist"},[i("li",{staticClass:"bf-t"},[t._v("播放列表")]),t._l(t.playlist,(function(e,n){return i("li",{key:e.id+n,class:["name-list",{active:t.music.id==e.id}],on:{click:function(i){return i.stopPropagation(),t.$emit("play",e)}}},[t._v(t._s(n+1)+" . "+t._s(e.name))])}))],2)])])]):t._e()},b=[],w={props:{music:{type:Object,default:()=>null},playState:{type:Boolean,default:!1},currentTime:{type:Number},totalTime:{type:Number,default:0},playlist:{type:Array,default:()=>null}},data(){return{lyric:null,showList:!1,playIndex:0,playMode:3}},created(){document.body.style.overflowY="hidden",this.getLyric()},beforeDestroy(){document.body.style.overflowY="auto"},methods:{changePlay(){this.$parent.changePlay()},changeShow(){this.showList=!this.showList},async getLyric(){await this.axios.get("/lyric?id="+this.music.id).then((t=>{this.lyric=t.lrc.lyric,console.log("re==>",t)}))},findMusicIndex(){this.playlist.forEach(((t,e)=>{t.id==this.music.id&&(this.playIndex=e)}))},changeMode(){this.playMode++,this.playMode>3&&(this.playMode=1)},changePlayMode(){if(1==this.playMode)this.$emit("changetime",0);else if(2==this.playMode){let t=Math.floor(Math.random()*this.playlist.length),e=this.playlist[t];this.$emit("play",e)}},prevSong(){if(3!=this.playMode)return this.changePlayMode();this.findMusicIndex(),0==this.playIndex?this.playIndex=this.playlist.length-1:this.playIndex--;let t=this.playlist[this.playIndex];this.$emit("play",t)},nextSong(){if(3!=this.playMode)return this.changePlayMode();this.findMusicIndex(),this.playIndex==this.playlist.length-1?this.playIndex=0:this.playIndex++;let t=this.playlist[this.playIndex];this.$emit("play",t)}},computed:{lyricArray(){if(!this.lyric)return[];let t=this.lyric.split("\n"),e=/\[(\d+):(\d+\.\d+)\]([\s\S.]*)/;return t.pop(),t.map((t=>{if(e.test(t))return{time:parseInt(60*RegExp.$1)+parseFloat(RegExp.$2),lyric:RegExp.$3}}))},currentIndex(){let t=0;for(let e=0;e<this.lyricArray.length;e++){let i=this.lyricArray[e].time,n=this.lyricArray[e+1].time;if(this.currentTime>=i&&this.currentTime<n)return t=e,e}return t},rangetime:{get(){return this.currentTime/this.totalTime*100},set(t){let e=this.totalTime*(t/100);this.$emit("changetime",e)}}},filters:{formatMusicTime(t){let e=Math.floor(t/60);e=e<10?"0"+e:e;let i=Math.floor(t%60);return i=i<10?"0"+i:i,e+":"+i}},watch:{music:{deep:!0,handler(){this.getLyric()}}}},C=w,x=(0,m.Z)(C,_,b,!1,null,"9117898e",null),M=x.exports,S={props:{music:{type:Object,default:()=>null},playlist:{type:Array,default:()=>null}},data(){return{isfull:!1,playState:!0,currentTime:0,totalTime:0}},components:{MusicFullScreen:M},methods:{changePlay(){let t=this.$refs.player;this.playState=!this.playState,this.playState?t.play():t.pause()},timeUpdate(t){let e=t.target;this.currentTime=e.currentTime,this.totalTime=e.duration},playAudio(){this.playState=!0},pauseAudio(){this.playState=!1},changeTime(t){this.$refs.player.currentTime=t}}},k=S,P=(0,m.Z)(k,v,g,!1,null,"027e85ec",null),T=P.exports,L=i(2196),$=i.n(L),E={data(){return{currentMusic:null,playList:[]}},components:{TabNav:y,MusicPlay:T},methods:{play(t){this.currentMusic=t,this.playList.push(t),this.playList=$().uniq(this.playList)}}},Z=E,A=(0,m.Z)(Z,c,u,!1,null,null,null),I=A.exports,j=i(2809),N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"recommend"},[i("title-border",[t._v("编辑推荐")]),t.recommendList.length>0?i("ul",t._l(t.recommendList,(function(e){return i("router-link",{key:e.id,attrs:{tag:"li",to:"/SongsList/"+e.id}},[i("images-item",{attrs:{item:e}}),i("p",[t._v(t._s(e.name))])],1)})),1):i("load-animate"),i("title-border",[t._v("最新音乐")]),t.newsongs.length>0?i("music-list",{attrs:{musiclist:t.newsongs},on:{play:function(e){return t.$emit("play",e)}}}):i("load-animate"),i("title-border",[t._v("热门歌手")]),i("div",{staticClass:"hotsinger"},t._l(t.hotsinger,(function(e){return i("div",{key:e.id,staticClass:"singer",on:{click:function(i){return i.stopPropagation(),t.GetSingerId(e.id)}}},[i("img",{attrs:{src:e.picUrl,alt:""}}),t._v(" "+t._s(e.name)+" ")])})),0),i("title-border",[t._v("推荐MV")]),t._l(t.recommendedMv,(function(e){return i("div",{key:e.id,staticClass:"recommendedMv"},[i("mv-play",{attrs:{mvid:e.id}}),i("div",{staticClass:"mvname"},[t._v(" "+t._s(e.name)+" ")]),i("div",{staticClass:"arname"},[t._v(" "+t._s(e.artistName)+" ")])],1)})),i("div",{ref:"loadmore",staticClass:"loadmore"},[t._v("没有更多啦(●'◡'●)")]),i("router-view")],2)},O=[],U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title-border"},[i("h3",[t._t("default")],2)])},B=[],F={},G=F,R=(0,m.Z)(G,U,B,!1,null,"4532926e",null),V=R.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"images-item"},[i("img",{attrs:{src:t.item.picUrl}}),i("span",[t._v(t._s(t._f("formatNum")(t.item.playCount)))])])},q=[],D={props:{item:{type:[Object,String],default:""}},filters:{formatNum(t){let e=Math.floor(t/1e3);return e/10+"万"}}},z=D,Y=(0,m.Z)(z,H,q,!1,null,"b6ab2cf6",null),K=Y.exports,J=i(5653),Q=i(5976),W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mvplay"},[i("div",{staticClass:"play"},[i("video",{ref:"",attrs:{width:"100%",height:"100%",controls:"controls",type:"video/mp4",loop:"loop",muted:"muted",src:t.mvurl},domProps:{muted:!0}})])])},X=[],tt={props:{mvid:{default:"0"}},components:{},data(){return{mvurl:{}}},computed:{},watch:{},created(){this.GetMvPlay()},mounted(){},beforeCreate(){},beforeMount(){},beforeUpdate(){},updated(){},beforeDestroy(){},destroyed(){},activated(){},methods:{async GetMvPlay(){console.log(this.mvid),await this.axios.get(`/mv/url?id=${this.mvid}`).then((t=>{this.mvurl=t.url,console.log("this.mvurl",this.mvurl)}))}}},et=tt,it=(0,m.Z)(et,W,X,!1,null,"6c709e13",null),nt=it.exports,at={data(){return{recommendList:[],newsongs:[],hotsinger:[],recommendedMv:[],mvplay:[],isfull:!1}},created(){this.getRecommendList(),this.getNeweSongs(),this.getHotSinger(),this.GetNewMV()},methods:{async getRecommendList(){await this.axios.get("/personalized").then((t=>{this.recommendList=t.result.slice(0,6)}))},async getNeweSongs(){await this.axios.get("/personalized/newsong").then((t=>{this.newsongs=t.result}))},async getHotSinger(){await this.axios.get("/top/artists?offset=0&limit=30").then((t=>{this.hotsinger=t.artists,console.log(this.hotsinger)}))},async GetNewMV(){await this.axios.get("/personalized/mv").then((t=>{this.recommendedMv=t.result,console.log("this.recommendedMv",this.recommendedMv)}))},GetSingerId(t){this.$router.push({name:"SingerView",params:{id:t}})}},components:{TitleBorder:V,ImagesItem:K,MusicList:J.Z,LoadAnimate:Q.Z,MvPlay:nt}},st=at,rt=(0,m.Z)(st,N,O,!1,null,"165d6ddf",null),lt=rt.exports;n.Z.use(j.Z);const ot=[{path:"/",component:lt},{path:"/HotMusic",component:()=>i.e(349).then(i.bind(i,349))},{path:"/Search",component:()=>i.e(789).then(i.bind(i,8789))},{path:"/SongsList/:listid",props:!0,component:()=>i.e(806).then(i.bind(i,2806))},{path:"/SingerView/:id/",name:"SingerView",component:()=>i.e(542).then(i.bind(i,3542))}],ct=new j.Z({mode:"hash",base:"",routes:ot,scrollBehavior(t){return t.path,{x:0,y:0}}});var ut=ct,pt=i(3067);n.Z.use(pt.Z),n.Z.config.productionTip=!1,n.Z.component("LoadAnimate",Q.Z),new n.Z({router:ut,render:t=>t(I)}).$mount("#app")}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,function(){var t=[];i.O=function(e,n,a,s){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],a=t[u][1],s=t[u][2];for(var l=!0,o=0;o<n.length;o++)(!1&s||r>=s)&&Object.keys(i.O).every((function(t){return i.O[t](n[o])}))?n.splice(o--,1):(l=!1,s<r&&(r=s));if(l){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[n,a,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,n){return i.f[n](t,e),e}),[]))}}(),function(){i.u=function(t){return"js/"+t+"."+{349:"51e4451e",542:"274cc419",789:"b77b5f1a",806:"e8865131"}[t]+".js"}}(),function(){i.miniCssF=function(t){return"css/"+t+"."+{349:"39cdd1b6",542:"7dbfe9b5",789:"74803cbe",806:"398c6f5a"}[t]+".css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="project_music:";i.l=function(n,a,s,r){if(t[n])t[n].push(a);else{var l,o;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var p=c[u];if(p.getAttribute("src")==n||p.getAttribute("data-webpack")==e+s){l=p;break}}l||(o=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.setAttribute("data-webpack",e+s),l.src=n),t[n]=[a];var d=function(e,i){l.onerror=l.onload=null,clearTimeout(m);var a=t[n];if(delete t[n],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(t){return t(i)})),e)return e(i)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),o&&document.head.appendChild(l)}}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){i.p=""}(),function(){var t=function(t,e,i,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var s=function(s){if(a.onerror=a.onload=null,"load"===s.type)i();else{var r=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.href||e,o=new Error("Loading CSS chunk "+t+" failed.\n("+l+")");o.code="CSS_CHUNK_LOAD_FAILED",o.type=r,o.request=l,a.parentNode.removeChild(a),n(o)}};return a.onerror=a.onload=s,a.href=e,document.head.appendChild(a),a},e=function(t,e){for(var i=document.getElementsByTagName("link"),n=0;n<i.length;n++){var a=i[n],s=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(s===t||s===e))return a}var r=document.getElementsByTagName("style");for(n=0;n<r.length;n++){a=r[n],s=a.getAttribute("data-href");if(s===t||s===e)return a}},n=function(n){return new Promise((function(a,s){var r=i.miniCssF(n),l=i.p+r;if(e(r,l))return a();t(n,l,a,s)}))},a={143:0};i.f.miniCss=function(t,e){var i={349:1,542:1,789:1,806:1};a[t]?e.push(a[t]):0!==a[t]&&i[t]&&e.push(a[t]=n(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}(),function(){var t={143:0};i.f.j=function(e,n){var a=i.o(t,e)?t[e]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((function(i,n){a=t[e]=[i,n]}));n.push(a[2]=s);var r=i.p+i.u(e),l=new Error,o=function(n){if(i.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",l.name="ChunkLoadError",l.type=s,l.request=r,a[1](l)}};i.l(r,o,"chunk-"+e,e)}},i.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,s,r=n[0],l=n[1],o=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(o)var u=o(i)}for(e&&e(n);c<r.length;c++)s=r[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(u)},n=self["webpackChunkproject_music"]=self["webpackChunkproject_music"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(1844)}));n=i.O(n)})();
//# sourceMappingURL=app.ace4191b.js.map